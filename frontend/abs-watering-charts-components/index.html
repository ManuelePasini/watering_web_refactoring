<html>
<head>
    <title>Mia App Vue 3</title>
    <meta charset="UTF-8">
    <script src="https://cdn.jsdelivr.net/npm/vue@3"></script>
    <!-- Use a relative path if the script is in the same directory -->
    <script src="./dist/simple-sample.umd.cjs"></script>
</head>
<body>


<script>
    const connectionParams = {
        environment: {
            host: 'http://localhost:8081/fieldCharts/',
            token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyIjoiYWJkc0B1bmliby5pdCIsImFmZmlsaWF0aW9uIjoiYWJkc0B1bmliby5pdCIsImF1dGhfdHlwZSI6InB3ZCIsImlhdCI6MTcwNzU3NTg5MSwiZXhwIjoxNzA4MTgwNjkxfQ.SaGXXVLqDSj2tYbfcAYJ8sY03ln18XVizK4FW4up3w8'
        },
        paths: {
            refStructureName: 'ZESPRI',
            companyName: 'AZ. AGR. DALLE FABBRICHE ANDREA',
            fieldName: 'Fondo Errano_T1 Basso_2023',
            sectorName: '1',
            thesis: 'T1 basso',
        },
        params: {
            colture: 'Kiwi',
            coltureType: 'G3',
            timeFilterFrom: 1690844400,
            timeFilterTo: 1707580897
        }
    }

    const checkboxes = document.querySelectorAll('input[type="checkbox"]');
    const parentComponent = document.getElementById('myDeltaChart');
    parentComponent.config = JSON.stringify(connectionParams)

    checkboxes.forEach(checkbox => {
        checkbox.addEventListener('change', () => {
            const selectedColors = Array.from(checkboxes)
                .filter(checkbox => checkbox.checked)
                .map(checkbox => checkbox.value);

            if (selectedColors.length > 0) {
                console.log(`Old timestamp ${connectionParams.params.timeFilterFrom}`)

                connectionParams.params.timeFilterFrom = selectedColors[0]
                console.log(`New timestamp ${connectionParams.params.timeFilterFrom}`)
                parentComponent.config = JSON.stringify(connectionParams)
            }
        });
    });
</script>
</body>
</html>
